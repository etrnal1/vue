{"ast":null,"code":"import _objectSpread from \"/Users/mac/vue/ffmpeg/frontend/ant-design-vue-pro/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport Modal from 'ant-design-vue/es/modal';\nexport default (function (Vue) {\n  function dialog(component, componentProps, modalProps) {\n    var _vm = this;\n    modalProps = modalProps || {};\n    if (!_vm || !_vm._isVue) {\n      return;\n    }\n    var dialogDiv = document.querySelector('body>div[type=dialog]');\n    if (!dialogDiv) {\n      dialogDiv = document.createElement('div');\n      dialogDiv.setAttribute('type', 'dialog');\n      document.body.appendChild(dialogDiv);\n    }\n    var handle = function handle(checkFunction, afterHandel) {\n      if (checkFunction instanceof Function) {\n        var res = checkFunction();\n        if (res instanceof Promise) {\n          res.then(function (c) {\n            c && afterHandel();\n          });\n        } else {\n          res && afterHandel();\n        }\n      } else {\n        // checkFunction && afterHandel()\n        checkFunction || afterHandel();\n      }\n    };\n    var dialogInstance = new Vue({\n      data: function data() {\n        return {\n          visible: true\n        };\n      },\n      router: _vm.$router,\n      store: _vm.$store,\n      mounted: function mounted() {\n        var _this = this;\n        this.$on('close', function (v) {\n          _this.handleClose();\n        });\n      },\n      methods: {\n        handleClose: function handleClose() {\n          var _this2 = this;\n          handle(this.$refs._component.onCancel, function () {\n            _this2.visible = false;\n            _this2.$refs._component.$emit('close');\n            _this2.$refs._component.$emit('cancel');\n            dialogInstance.$destroy();\n          });\n        },\n        handleOk: function handleOk() {\n          var _this3 = this;\n          handle(this.$refs._component.onOK || this.$refs._component.onOk, function () {\n            _this3.visible = false;\n            _this3.$refs._component.$emit('close');\n            _this3.$refs._component.$emit('ok');\n            dialogInstance.$destroy();\n          });\n        }\n      },\n      render: function render(h) {\n        var that = this;\n        var modalModel = modalProps && modalProps.model;\n        if (modalModel) {\n          delete modalProps.model;\n        }\n        var ModalProps = Object.assign({}, modalModel && {\n          model: modalModel\n        } || {}, {\n          attrs: Object.assign({}, _objectSpread({}, modalProps.attrs || modalProps), {\n            visible: this.visible\n          }),\n          on: Object.assign({}, _objectSpread({}, modalProps.on || modalProps), {\n            ok: function ok() {\n              that.handleOk();\n            },\n            cancel: function cancel() {\n              that.handleClose();\n            }\n          })\n        });\n        var componentModel = componentProps && componentProps.model;\n        if (componentModel) {\n          delete componentProps.model;\n        }\n        var ComponentProps = Object.assign({}, componentModel && {\n          model: componentModel\n        } || {}, {\n          ref: '_component',\n          attrs: Object.assign({}, _objectSpread({}, componentProps && componentProps.attrs || componentProps)),\n          on: Object.assign({}, _objectSpread({}, componentProps && componentProps.on || componentProps))\n        });\n        return h(Modal, ModalProps, [h(component, ComponentProps)]);\n      }\n    }).$mount(dialogDiv);\n  }\n  Object.defineProperty(Vue.prototype, '$dialog', {\n    get: function get() {\n      return function () {\n        dialog.apply(this, arguments);\n      };\n    }\n  });\n});","map":{"version":3,"names":["Modal","Vue","dialog","component","componentProps","modalProps","_vm","_isVue","dialogDiv","document","querySelector","createElement","setAttribute","body","appendChild","handle","checkFunction","afterHandel","Function","res","Promise","then","c","dialogInstance","data","visible","router","$router","store","$store","mounted","_this","$on","v","handleClose","methods","_this2","$refs","_component","onCancel","$emit","$destroy","handleOk","_this3","onOK","onOk","render","h","that","modalModel","model","ModalProps","Object","assign","attrs","_objectSpread","on","ok","cancel","componentModel","ComponentProps","ref","$mount","defineProperty","prototype","get","apply","arguments"],"sources":["/Users/mac/vue/ffmpeg/frontend/ant-design-vue-pro/src/components/Dialog.js"],"sourcesContent":["import Modal from 'ant-design-vue/es/modal'\nexport default (Vue) => {\n  function dialog (component, componentProps, modalProps) {\n    const _vm = this\n    modalProps = modalProps || {}\n    if (!_vm || !_vm._isVue) {\n      return\n    }\n    let dialogDiv = document.querySelector('body>div[type=dialog]')\n    if (!dialogDiv) {\n      dialogDiv = document.createElement('div')\n      dialogDiv.setAttribute('type', 'dialog')\n      document.body.appendChild(dialogDiv)\n    }\n\n    const handle = function (checkFunction, afterHandel) {\n      if (checkFunction instanceof Function) {\n        const res = checkFunction()\n        if (res instanceof Promise) {\n          res.then(c => {\n            c && afterHandel()\n          })\n        } else {\n          res && afterHandel()\n        }\n      } else {\n        // checkFunction && afterHandel()\n        checkFunction || afterHandel()\n      }\n    }\n\n    const dialogInstance = new Vue({\n      data () {\n        return {\n          visible: true\n        }\n      },\n      router: _vm.$router,\n      store: _vm.$store,\n      mounted () {\n        this.$on('close', (v) => {\n          this.handleClose()\n        })\n      },\n      methods: {\n        handleClose () {\n          handle(this.$refs._component.onCancel, () => {\n            this.visible = false\n            this.$refs._component.$emit('close')\n            this.$refs._component.$emit('cancel')\n            dialogInstance.$destroy()\n          })\n        },\n        handleOk () {\n          handle(this.$refs._component.onOK || this.$refs._component.onOk, () => {\n            this.visible = false\n            this.$refs._component.$emit('close')\n            this.$refs._component.$emit('ok')\n            dialogInstance.$destroy()\n          })\n        }\n      },\n      render: function (h) {\n        const that = this\n        const modalModel = modalProps && modalProps.model\n        if (modalModel) {\n          delete modalProps.model\n        }\n        const ModalProps = Object.assign({}, modalModel && { model: modalModel } || {}, {\n          attrs: Object.assign({}, {\n            ...(modalProps.attrs || modalProps)\n          }, {\n            visible: this.visible\n          }),\n          on: Object.assign({}, {\n            ...(modalProps.on || modalProps)\n          }, {\n            ok: () => {\n              that.handleOk()\n            },\n            cancel: () => {\n              that.handleClose()\n            }\n          })\n        })\n\n        const componentModel = componentProps && componentProps.model\n        if (componentModel) {\n          delete componentProps.model\n        }\n        const ComponentProps = Object.assign({}, componentModel && { model: componentModel } || {}, {\n          ref: '_component',\n          attrs: Object.assign({}, {\n            ...((componentProps && componentProps.attrs) || componentProps)\n          }),\n          on: Object.assign({}, {\n            ...((componentProps && componentProps.on) || componentProps)\n          })\n        })\n\n        return h(Modal, ModalProps, [h(component, ComponentProps)])\n      }\n    }).$mount(dialogDiv)\n  }\n\n  Object.defineProperty(Vue.prototype, '$dialog', {\n    get: () => {\n      return function () {\n        dialog.apply(this, arguments)\n      }\n    }\n  })\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}