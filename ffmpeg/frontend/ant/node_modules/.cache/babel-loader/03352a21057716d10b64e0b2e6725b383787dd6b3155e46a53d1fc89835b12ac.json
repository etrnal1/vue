{"ast":null,"code":"import _objectSpread from \"/Users/mac/vue/ffmpeg/frontend/ant-design-vue-pro/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport { timeFix } from '@/utils/util';\nimport { mapState } from 'vuex';\nimport { PageHeaderWrapper } from '@ant-design-vue/pro-layout';\nimport { Radar } from '@/components';\nimport { getRoleList, getServiceList } from '@/api/manage';\nvar DataSet = require('@antv/data-set');\nexport default {\n  name: 'Workplace',\n  components: {\n    PageHeaderWrapper: PageHeaderWrapper,\n    Radar: Radar\n  },\n  data: function data() {\n    return {\n      timeFix: timeFix(),\n      avatar: '',\n      user: {},\n      projects: [],\n      loading: true,\n      radarLoading: true,\n      activities: [],\n      teams: [],\n      // data\n      axis1Opts: {\n        dataKey: 'item',\n        line: null,\n        tickLine: null,\n        grid: {\n          lineStyle: {\n            lineDash: null\n          },\n          hideFirstLine: false\n        }\n      },\n      axis2Opts: {\n        dataKey: 'score',\n        line: null,\n        tickLine: null,\n        grid: {\n          type: 'polygon',\n          lineStyle: {\n            lineDash: null\n          }\n        }\n      },\n      scale: [{\n        dataKey: 'score',\n        min: 0,\n        max: 80\n      }],\n      axisData: [{\n        item: '引用',\n        a: 70,\n        b: 30,\n        c: 40\n      }, {\n        item: '口碑',\n        a: 60,\n        b: 70,\n        c: 40\n      }, {\n        item: '产量',\n        a: 50,\n        b: 60,\n        c: 40\n      }, {\n        item: '贡献',\n        a: 40,\n        b: 50,\n        c: 40\n      }, {\n        item: '热度',\n        a: 60,\n        b: 70,\n        c: 40\n      }, {\n        item: '引用',\n        a: 70,\n        b: 50,\n        c: 40\n      }],\n      radarData: []\n    };\n  },\n  computed: _objectSpread(_objectSpread({}, mapState({\n    nickname: function nickname(state) {\n      return state.user.nickname;\n    },\n    welcome: function welcome(state) {\n      return state.user.welcome;\n    }\n  })), {}, {\n    currentUser: function currentUser() {\n      return {\n        name: 'Serati Ma',\n        avatar: 'https://gw.alipayobjects.com/zos/antfincdn/XAosXuNZyF/BiazfanxmamNRoxxVxka.png'\n      };\n    },\n    userInfo: function userInfo() {\n      return this.$store.getters.userInfo;\n    }\n  }),\n  created: function created() {\n    this.user = this.userInfo;\n    this.avatar = this.userInfo.avatar;\n    getRoleList().then(function (res) {\n      // console.log('workplace -> call getRoleList()', res)\n    });\n    getServiceList().then(function (res) {\n      // console.log('workplace -> call getServiceList()', res)\n    });\n  },\n  mounted: function mounted() {\n    this.getProjects();\n    this.getActivity();\n    this.getTeams();\n    this.initRadar();\n  },\n  methods: {\n    getProjects: function getProjects() {\n      var _this = this;\n      this.$http.get('/list/search/projects').then(function (res) {\n        _this.projects = res.result && res.result.data;\n        _this.loading = false;\n      });\n    },\n    getActivity: function getActivity() {\n      var _this2 = this;\n      this.$http.get('/workplace/activity').then(function (res) {\n        _this2.activities = res.result;\n      });\n    },\n    getTeams: function getTeams() {\n      var _this3 = this;\n      this.$http.get('/workplace/teams').then(function (res) {\n        _this3.teams = res.result;\n      });\n    },\n    initRadar: function initRadar() {\n      var _this4 = this;\n      this.radarLoading = true;\n      this.$http.get('/workplace/radar').then(function (res) {\n        var dv = new DataSet.View().source(res.result);\n        dv.transform({\n          type: 'fold',\n          fields: ['个人', '团队', '部门'],\n          key: 'user',\n          value: 'score'\n        });\n        _this4.radarData = dv.rows;\n        _this4.radarLoading = false;\n      });\n    }\n  }\n};","map":{"version":3,"names":["timeFix","mapState","PageHeaderWrapper","Radar","getRoleList","getServiceList","DataSet","require","name","components","data","avatar","user","projects","loading","radarLoading","activities","teams","axis1Opts","dataKey","line","tickLine","grid","lineStyle","lineDash","hideFirstLine","axis2Opts","type","scale","min","max","axisData","item","a","b","c","radarData","computed","_objectSpread","nickname","state","welcome","currentUser","userInfo","$store","getters","created","then","res","mounted","getProjects","getActivity","getTeams","initRadar","methods","_this","$http","get","result","_this2","_this3","_this4","dv","View","source","transform","fields","key","value","rows"],"sources":["src/views/dashboard/Workplace.vue"],"sourcesContent":["<template>\n  <page-header-wrapper>\n    <template v-slot:content>\n      <div class=\"page-header-content\">\n        <div class=\"avatar\">\n          <a-avatar size=\"large\" :src=\"currentUser.avatar\" />\n        </div>\n        <div class=\"content\">\n          <div class=\"content-title\">\n            {{ timeFix }}，{{ user.name }}<span class=\"welcome-text\">，{{ welcome }}</span>\n          </div>\n          <div>前端工程师 | 蚂蚁金服 - 某某某事业群 - VUE平台</div>\n        </div>\n      </div>\n    </template>\n    <template v-slot:extraContent>\n      <div class=\"extra-content\">\n        <div class=\"stat-item\">\n          <a-statistic title=\"项目数\" :value=\"56\" />\n        </div>\n        <div class=\"stat-item\">\n          <a-statistic title=\"团队内排名\" :value=\"8\" suffix=\"/ 24\" />\n        </div>\n        <div class=\"stat-item\">\n          <a-statistic title=\"项目访问\" :value=\"2223\" />\n        </div>\n      </div>\n    </template>\n\n    <div>\n      <a-row :gutter=\"24\">\n        <a-col :xl=\"16\" :lg=\"24\" :md=\"24\" :sm=\"24\" :xs=\"24\">\n          <a-card\n            class=\"project-list\"\n            :loading=\"loading\"\n            style=\"margin-bottom: 24px;\"\n            :bordered=\"false\"\n            title=\"进行中的项目\"\n            :body-style=\"{ padding: 0 }\"\n          >\n            <a slot=\"extra\">全部项目</a>\n            <div>\n              <a-card-grid class=\"project-card-grid\" :key=\"i\" v-for=\"(item, i) in projects\">\n                <a-card :bordered=\"false\" :body-style=\"{ padding: 0 }\">\n                  <a-card-meta>\n                    <div slot=\"title\" class=\"card-title\">\n                      <a-avatar size=\"small\" :src=\"item.cover\" />\n                      <a>{{ item.title }}</a>\n                    </div>\n                    <div slot=\"description\" class=\"card-description\">\n                      {{ item.description }}\n                    </div>\n                  </a-card-meta>\n                  <div class=\"project-item\">\n                    <a href=\"/#/\">科学搬砖组</a>\n                    <span class=\"datetime\">9小时前</span>\n                  </div>\n                </a-card>\n              </a-card-grid>\n            </div>\n          </a-card>\n\n          <a-card :loading=\"loading\" title=\"动态\" :bordered=\"false\">\n            <a-list>\n              <a-list-item :key=\"index\" v-for=\"(item, index) in activities\">\n                <a-list-item-meta>\n                  <a-avatar slot=\"avatar\" size=\"small\" :src=\"item.user.avatar\" />\n                  <div slot=\"title\">\n                    <span>{{ item.user.nickname }}</span\n                    >&nbsp; 在&nbsp;<a href=\"#\">{{ item.project.name }}</a\n                    >&nbsp; <span>{{ item.project.action }}</span\n                    >&nbsp;\n                    <a href=\"#\">{{ item.project.event }}</a>\n                  </div>\n                  <div slot=\"description\">{{ item.time }}</div>\n                </a-list-item-meta>\n              </a-list-item>\n            </a-list>\n          </a-card>\n        </a-col>\n        <a-col\n          style=\"padding: 0 12px\"\n          :xl=\"8\"\n          :lg=\"24\"\n          :md=\"24\"\n          :sm=\"24\"\n          :xs=\"24\">\n          <a-card\n            title=\"快速开始 / 便捷导航\"\n            style=\"margin-bottom: 24px\"\n            :bordered=\"false\"\n            :body-style=\"{ padding: 0 }\"\n          >\n            <div class=\"item-group\">\n              <a>操作一</a>\n              <a>操作二</a>\n              <a>操作三</a>\n              <a>操作四</a>\n              <a>操作五</a>\n              <a>操作六</a>\n              <a-button size=\"small\" type=\"primary\" ghost icon=\"plus\">添加</a-button>\n            </div>\n          </a-card>\n          <a-card\n            title=\"XX 指数\"\n            style=\"margin-bottom: 24px\"\n            :loading=\"radarLoading\"\n            :bordered=\"false\"\n            :body-style=\"{ padding: 0 }\"\n          >\n            <div style=\"min-height: 400px;\">\n              <!-- :scale=\"scale\" :axis1Opts=\"axis1Opts\" :axis2Opts=\"axis2Opts\"  -->\n              <radar :data=\"radarData\" />\n            </div>\n          </a-card>\n          <a-card :loading=\"loading\" title=\"团队\" :bordered=\"false\">\n            <div class=\"members\">\n              <a-row>\n                <a-col :span=\"12\" v-for=\"(item, index) in teams\" :key=\"index\">\n                  <a>\n                    <a-avatar size=\"small\" :src=\"item.avatar\" />\n                    <span class=\"member\">{{ item.name }}</span>\n                  </a>\n                </a-col>\n              </a-row>\n            </div>\n          </a-card>\n        </a-col>\n      </a-row>\n    </div>\n  </page-header-wrapper>\n</template>\n\n<script>\nimport { timeFix } from '@/utils/util'\nimport { mapState } from 'vuex'\nimport { PageHeaderWrapper } from '@ant-design-vue/pro-layout'\nimport { Radar } from '@/components'\n\nimport { getRoleList, getServiceList } from '@/api/manage'\n\nconst DataSet = require('@antv/data-set')\n\nexport default {\n  name: 'Workplace',\n  components: {\n    PageHeaderWrapper,\n    Radar\n  },\n  data () {\n    return {\n      timeFix: timeFix(),\n      avatar: '',\n      user: {},\n\n      projects: [],\n      loading: true,\n      radarLoading: true,\n      activities: [],\n      teams: [],\n\n      // data\n      axis1Opts: {\n        dataKey: 'item',\n        line: null,\n        tickLine: null,\n        grid: {\n          lineStyle: {\n            lineDash: null\n          },\n          hideFirstLine: false\n        }\n      },\n      axis2Opts: {\n        dataKey: 'score',\n        line: null,\n        tickLine: null,\n        grid: {\n          type: 'polygon',\n          lineStyle: {\n            lineDash: null\n          }\n        }\n      },\n      scale: [\n        {\n          dataKey: 'score',\n          min: 0,\n          max: 80\n        }\n      ],\n      axisData: [\n        { item: '引用', a: 70, b: 30, c: 40 },\n        { item: '口碑', a: 60, b: 70, c: 40 },\n        { item: '产量', a: 50, b: 60, c: 40 },\n        { item: '贡献', a: 40, b: 50, c: 40 },\n        { item: '热度', a: 60, b: 70, c: 40 },\n        { item: '引用', a: 70, b: 50, c: 40 }\n      ],\n      radarData: []\n    }\n  },\n  computed: {\n    ...mapState({\n      nickname: state => state.user.nickname,\n      welcome: state => state.user.welcome\n    }),\n    currentUser () {\n      return {\n        name: 'Serati Ma',\n        avatar: 'https://gw.alipayobjects.com/zos/antfincdn/XAosXuNZyF/BiazfanxmamNRoxxVxka.png'\n      }\n    },\n    userInfo () {\n      return this.$store.getters.userInfo\n    }\n  },\n  created () {\n    this.user = this.userInfo\n    this.avatar = this.userInfo.avatar\n\n    getRoleList().then(res => {\n      // console.log('workplace -> call getRoleList()', res)\n    })\n\n    getServiceList().then(res => {\n      // console.log('workplace -> call getServiceList()', res)\n    })\n  },\n  mounted () {\n    this.getProjects()\n    this.getActivity()\n    this.getTeams()\n    this.initRadar()\n  },\n  methods: {\n    getProjects () {\n      this.$http.get('/list/search/projects').then(res => {\n        this.projects = res.result && res.result.data\n        this.loading = false\n      })\n    },\n    getActivity () {\n      this.$http.get('/workplace/activity').then(res => {\n        this.activities = res.result\n      })\n    },\n    getTeams () {\n      this.$http.get('/workplace/teams').then(res => {\n        this.teams = res.result\n      })\n    },\n    initRadar () {\n      this.radarLoading = true\n\n      this.$http.get('/workplace/radar').then(res => {\n        const dv = new DataSet.View().source(res.result)\n        dv.transform({\n          type: 'fold',\n          fields: ['个人', '团队', '部门'],\n          key: 'user',\n          value: 'score'\n        })\n\n        this.radarData = dv.rows\n        this.radarLoading = false\n      })\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n@import './Workplace.less';\n\n.project-list {\n  .card-title {\n    font-size: 0;\n\n    a {\n      color: rgba(0, 0, 0, 0.85);\n      margin-left: 12px;\n      line-height: 24px;\n      height: 24px;\n      display: inline-block;\n      vertical-align: top;\n      font-size: 14px;\n\n      &:hover {\n        color: #1890ff;\n      }\n    }\n  }\n\n  .card-description {\n    color: rgba(0, 0, 0, 0.45);\n    height: 44px;\n    line-height: 22px;\n    overflow: hidden;\n  }\n\n  .project-item {\n    display: flex;\n    margin-top: 8px;\n    overflow: hidden;\n    font-size: 12px;\n    height: 20px;\n    line-height: 20px;\n\n    a {\n      color: rgba(0, 0, 0, 0.45);\n      display: inline-block;\n      flex: 1 1 0;\n\n      &:hover {\n        color: #1890ff;\n      }\n    }\n\n    .datetime {\n      color: rgba(0, 0, 0, 0.25);\n      flex: 0 0 auto;\n      float: right;\n    }\n  }\n\n  .ant-card-meta-description {\n    color: rgba(0, 0, 0, 0.45);\n    height: 44px;\n    line-height: 22px;\n    overflow: hidden;\n  }\n}\n\n.item-group {\n  padding: 20px 0 8px 24px;\n  font-size: 0;\n\n  a {\n    color: rgba(0, 0, 0, 0.65);\n    display: inline-block;\n    font-size: 14px;\n    margin-bottom: 13px;\n    width: 25%;\n  }\n}\n\n.members {\n  a {\n    display: block;\n    margin: 12px 0;\n    line-height: 24px;\n    height: 24px;\n\n    .member {\n      font-size: 14px;\n      color: rgba(0, 0, 0, 0.65);\n      line-height: 24px;\n      max-width: 100px;\n      vertical-align: top;\n      margin-left: 12px;\n      transition: all 0.3s;\n      display: inline-block;\n    }\n\n    &:hover {\n      span {\n        color: #1890ff;\n      }\n    }\n  }\n}\n\n.mobile {\n  .project-list {\n    .project-card-grid {\n      width: 100%;\n    }\n  }\n\n  .more-info {\n    border: 0;\n    padding-top: 16px;\n    margin: 16px 0 16px;\n  }\n\n  .headerContent .title .welcome-text {\n    display: none;\n  }\n}\n</style>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}